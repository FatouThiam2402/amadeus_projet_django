{% extends 'base2.html' %}
{% load static %}
{% block maincontent %}
<!--inner banner-->
{% comment %} {% if messages %}
<div class="alert alert-success text-center" id="alert-msg">
  {% for message in messages %}
  <h3>{{ message }}</h3>
  {% endfor %}
</div>
{% endif %} {% endcomment %}

<div class="inner-banner">
  <div class="container">
    <div class="row">
      <div class="col-md-7">
        <h1>S'inscrire au site</h1>
      </div>
      <div class="col-md-5">
        <ol class="breadcrumb">
          <li><a href="{% url 'indexpage' %}">Acceuil</a></li>
          <li class="active">Inscription</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<!--inner banner End-->

<!--Main Content Start-->
<div class="main-content padding-0">
  <section class="appointment-form">
    <div class="container-fluid">
      <div class="row">

        <div class="col-md-5 col-md-offset-1"><img src="{% static 'amadeuspro/images/Banner.png' %}" alt="" class="imgWindow2 img-responsive shadow-black"></div>


        <div class="col-md-5">
          <div class="card">
            <div class="card-header">Inscription
              <span class='pull-right'>Deja Membre ?<span class="text-info"> <a href="{% url 'seConnecter' %}">Se connecter!</a> </span></span>
            </div>
          <form action="{% url 'sInscrire' %}" method="post">
            {% csrf_token %}
            <div class="card-body well">

                <div class="row mtop30">
                  <div class="col-md-6">
                    <input class="form-control" placeholder="Prenom *" type="text" name="fname" required>
                    <span class="star small"></span>
                  </div>

                  <div class="col-md-6">
                    <input class="form-control" placeholder="Nom *" type="text" name="lname" required>
                    <span class="star small"></span>
                  </div>

                </div>


                <div class="row mtop30">
                  <div class="col-md-6 col-sm-6">
                    <input class="form-control" placeholder="Votre Email *" type="text" name="email" required>
                    <span class="star small"></span>
                  </div>

                  <div class="col-md-6">
                    <input class="form-control" placeholder="Nom utilisateur *" type="text" name="username" required>
                    <span class="star small">{{message}}</span>
                  </div>
                </div>

                <div class="row mtop30">
                  <div class="col-md-12">
                    <input class='form-control pswd' name="password" type="password"  placeholder="votre mot de passe">
                    <span class="star small"></span>
                  </div>
    
                  <div class="col-md-12 mtop30">
                    <input class='form-control cpswd' name="confirmation" type="password" placeholder="confimer votre mot de passe">
                    <span class="star small"></span>
                  </div>
                  {% if errors %}
                  <div class='label label-danger'>
                      <h3>{{ errors }}</h3>
                  </div>
                  {% endif %}
                </div>


                <div class="row mtop30">
                  <div class="col-md-12 text-center">
                    <textarea placeholder="Adresse" name="adresse" class='form-control' rows='7'></textarea>
                  </div>
                </div>
                
                <div class='row mtop30'>
                  <div class='col-md-4 col-md-offset-5'>
                    <button class='btn btn-info' type="submit">S'inscrire</button>
                  </div>
                </div>
                  <div class="card-footer">
                  <div class="col-md-12 text-center">
                    BitMasters , 2023
                  </div>
                </div>

          </div>

            </div>
          <br><br>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>

<!--Main Content End-->
{% endblock maincontent %}

<script>

  document.addEventListener("DOMContentLoaded", () => {
    let check = [false,false,false,false,false,false];
    document.querySelectorAll(".inp").forEach(input => {
        input.addEventListener('input', () => {

            if(input.classList.contains('username')){
                if(input.value.trim().length !== 0) {check[0]=true;}
                else{check[0] = false;}
            }
            if(input.classList.contains('fname')){
                if(input.value.trim().length !== 0) {check[1]=true;}
                else{check[1] = false;}
            }
            if(input.classList.contains('lname')){
                if(input.value.trim().length !== 0) {check[2]=true;}
                else{check[2] = false;}
            }
            if(input.classList.contains('pswd')){
                document.querySelector('.cpswd').value = "";
                document.querySelector('.cpswd').parentElement.querySelector('span').innerText = "";
                check[4] = false;
                if(input.value.trim().length !== 0) {check[3]=true;}
                else{check[3] = false;}
            }
            if(input.classList.contains('cpswd')){
                if(input.value.trim().length !== 0) {
                    if(input.value !== document.querySelector('.pswd').value) {
                        input.parentElement.querySelector('span').innerText = "Les mots dde passes ne correspondent pas";
                        check[4] = false;
                    }
                    else {
                        input.parentElement.querySelector('span').innerText = "";
                        check[4]=true;
                    }
                }
                else{check[4] = false;}
            }
            if(input.classList.contains('email')){
                if(input.value.trim().length !== 0) {check[5]=true;}
                else{check[5] = false;}
            }

            let i;
            for(i=0;i<6;i++) {
                if(!check[i]) {
                    break;
                }
            }

            if(i===6) {
                document.querySelector('input[type="submit"]').disabled = false;
            }
            else {
                document.querySelector('input[type="submit"]').disabled = true;
            }

        });
    });
    document.querySelectorAll('.custom-file-input').forEach(element => {
        element.addEventListener("change", event => {
            if(event.target.files[0]) {
                event.target.parentElement.querySelector('.custom-file-label').innerText = event.target.files[0].name;
            }
            else {
                if(event.target.id == 'profile') {
                    event.target.parentElement.querySelector('.custom-file-label').innerHTML = `<span style="color: #6c757d;">Choose profile picture<span>`;
                }
                else if(event.target.id == 'cover') {
                    event.target.parentElement.querySelector('.custom-file-label').innerHTML = `<span style="color: #6c757d;">Choose cover picture<span>`;
                }
            }
        });
    });

});
</script>