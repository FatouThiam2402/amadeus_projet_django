{% extends 'base2.html' %}
{% load static %}
{% block maincontent %}

{% comment %} {% if messages %}
<div class="alert alert-success text-center" id="alert-msg">
  {% for message in messages %}
  <h3>{{ message }}</h3>
  {% endfor %}
</div>
{% endif %}  {% endcomment %}
<style>

.marquee-rtl {
  overflow: hidden; /* important */
  inline-size:50%; max-inline-size: 30em; /* A ADAPTER */
}
.marquee-rtl > div {
  display: inline-block; /* important */
  white-space: nowrap; /* important */
  animation: defilement-rtl 15s infinite linear; /* défilement */
  cursor: pointer;
  padding: 10px 2em 10px 100%;
  color:black;
}
.marquee-rtl:hover > div {
  animation-play-state: paused; /* met en pause le défilement */
}
.marquee-rtl > div:first-letter {
  font-weight: 700;
  color: green;
}
@keyframes defilement-rtl {
  0% {
    -webkit-transform: translate(0);
    transform: translate(0);
  }
  100% {
    -webkit-transform: translate(-100%);
    transform: translate(-100%);
  }
}
/* ---------------------------- */
/* texte sur plusieurs lignes automatiquement */
.marquee-multi-lignes > div { 
  inline-size:90%; 
  white-space: normal; /* important */
}

/* ---------------------------- */
/* déco */
h2, p { text-align:center; }

.marquee-rtl {
  margin: 2em auto;
  {% comment %} border: 1px solid #F0F0FF; {% endcomment %}
  {% comment %} box-shadow: 0 .25em .5em #CCC,inset 0 0 1em .25em #CCC; {% endcomment %}
}
.marquee-rtl > div {
  font-size: 1.5em;
}
.pl{
  padding-inline-start:80px;
}

{% comment %} 
.search-input .autocom-box{
  position:absolute;
  z-index:1;
  border: 1px solid #d4d4d4;
  border-block-end: none;
  min-inline-size: 200px;
  background: black;
  color : white;
  padding: 10px 8px;
  max-block-size: 280px;
  overflow-y: auto;
  opacity: 0;
  pointer-events: none;
 }
 
 ::placeholder{
     font-size: 100%;
 }
 .search-input.active .autocom-box{
     padding: 10px 8px;
     opacity: 1;
     pointer-events: auto;
 }
 
 .search-input.active .autocom-box li{
     display: block;
 }
 
 .autocom-box li{
     list-style: none;
     padding: 8px 12px;
     inline-size: 100%;
     cursor: default;
     border-radius: 3px;
     display: none;
 }
 
 .autocom-box li:hover{
     background: orange;
 } {% endcomment %}

</style>

<link href="{% static 'amadeuspro/css/style.css' %}" rel="stylesheet">

{% comment %} https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css
https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap.min.css {% endcomment %}


<div class="flightback">
<div class="container-fluid">

<div class="row">
<div class="col-md-10 col-md-offset-1 mt-auto">
  <center><h1 class="marquee-rtl"><div><h1>Bienvenue dans la Plateforme de Reservation de Vols</h1></div></h1></center>
    <div class="main-content padding-0">
  <section class="appointment-form colorTransparent">
    <form method="POST" action="{% url 'toutLesVols' %}">          
          {% csrf_token %}
          <center><legend><h2 class='text-light'>Reserver pour des vols internationaux</h2></legend></center>
        <div class='row'>
          <div class="col-md-2 form-group align-items-start flex-column form-check-inline">
            <label class="form-check-label">
            <input type="radio" class="form-check-input trip-type" id="one-way" name="TripType" value="1" checked>Aller Simple
            </label>
        </div>
        <div class="form-check-inline">
            <label class="form-check-label">
              {% comment %} {% if trip_type == '2' %}checked{% endif %} {% endcomment %}
            <input type="radio" class="form-check-input trip-type" id="round-trip" name="TripType" value="2" {% if trip_type == '2' %}checked{% endif %}>Aller Retour
            </label>
        </div>
        </div>
        <div class="row">
             <div class="col-md-2 form-group align-items-start flex-column">
               <h3 class="text-light"> Lieu </h3>
          </div>
          <div class="col-md-4 form-group align-items-start flex-column">
                        <label for="origin" class="d-inline-flex"><i class='fa fa-map-marker fa-2x'></i></label>
                        <input type="text" placeholder="Ville ou Aeroport" class="form-control" id="origin" name="origin" required autocomplete='off'>
          </div>

          <div class="form-group col-md-4 align-items-start flex-column">
                        <label for="depart" class="d-inline-flex"><i class='fa fa-map-marker fa-2x'></i></label>
                        <input type="text" placeholder="Ville ou Aeroport" class="form-control colorTransparent" id="destination" name="destination" required autocomplete='off'>

            </div>

            </div>


            <div class="row">
              <br>
            </div>

            <div class="row">
                <div class="col-md-2 form-group align-items-start flex-column">
               <h3 class="text-light"> Date </h3>
                 </div>
                  <div class="form-group col-md-4 align-items-start flex-column">
                                <label for="departureDate" class=" d-inline-flex"><i class='fa fa-calendar fa-2x'></i></label>
                                <input type="date" class="form-control" id="departureDate" name="departureDate"
                                onkeydown="return false">
                    </div>


                    <div class="form-group col-md-4 align-items-start flex-column">
                                <label for="returnDate" class="d-inline-flex"><i class='fa fa-calendar fa-2x'></i></label>
                                <input type="date" 
                                   class="form-control" id="returnDate"
                                    name="returnDate" onkeydown="return false" {% if trip_type != '2' %} disabled {% endif %}>
                    </div> 

            </div>

            <div class="row">
              <br>
            </div>

        {% comment %} <div class="row">
            <div class="col-md-2 form-group align-items-start flex-column">
               <h3 class="text-light">  Passagers </h3>
          </div> {% endcomment %}
            {% comment %} <div class="form-group col-md-4 align-items-start flex-column">
              <label for="adults" class="d-inline-flex">Adultes <span > 12+
                            </span></label>
                        <select class="form-select-lg" id="adults"
                            onchange="javascript: dynamicDropDown(this.options[this.selectedIndex].value);">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                        </select>
            </div> {% endcomment %}

            {% comment %} <div class="col-md-4 form-group align-items-start flex-column">
            <label for="children" class="d-inline-flex col-auto">Enfants <span class="sublabel"> 2-11</span></label>
                        <select class="form-select" id="children">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                        </select>
            </div> {% endcomment %}

            {% comment %} <div class="col-md-3 form-group align-items-start flex-column pull-left">
                        <label for="infants" class="d-inline-flex col-auto">Enfants 
                            <span class="sublabel"> Moins de 2</span></label>
                        <select class="form-select" id="infants">
                            <option value="0">0</option>
                            <option value="1">1</option>
                        </select>
            </div> {% endcomment %}
             {% comment %} </div> {% endcomment %}



        <div class="row">
                    <div class="col-md-2 form-group align-items-start flex-column">
                       <h3 class="text-light"> Vol</h3>
                  </div>
                    <div class="form-group col-md-2 align-items-start flex-column pl">
                        <label for="cabin" class="d-inline-flex"><i class='fa fa-paper-plane fa-2x'></i></label>
                        <select class="form-select" id="cabin" name='cabin'>
                            <option value="ECONOMY">Economique</option>
                            <option value="PREMIUM_ECONOMY">Premium Economique</option>
                            <option value="BUSINESS">Business</option>
                            <option value="FIRST">Premiere classe</option>
                        </select>
                    </div>
                    {% comment %} <div class="form-group col-md-4  align-items-start flex-column">
                        <div class="form-check form-switch">
                            <input class="form-check-input align-self-center" type="checkbox" id="directFlights">
                            <label class="form-check-label d-inline-flex align-self-center" for="directFlights">Vol Direct</label>
                        </div>
                    </div> {% endcomment %}
        </div>
        <div class="row">
                <div class="col-md-4 col-md-offset-4">
                    <center><button 
                      class="submit-btn" 
                      onclick="runFly()" 
                      >Chercher</button></center>
              </div>
        </div>

              <br><br>

    </form>
  </section> 
</div>
</div>
</div>
</div>
<br><br>
</div>
</div>
</div>
</div>

  <script src="{% static 'amadeuspro/js/script.js' %}"></script>
  <script src="{% static 'amadeuspro/js/scriptvol.js' %}"></script>
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"
  ></script>
  {% comment %} <script>
//je recupere mes elements importants
const searchwrapper = document.querySelector(".search-input");
const inputbox      = searchwrapper.querySelector("#origin");
const inputbox2     = searchwrapper.querySelector("#destination");
const suggbox       = searchwrapper.querySelector(".autocom-box");


  //Si l'utilisateur clique sur le bouton
  inputbox.onkeyup = (e)=>{
    let userData = e.target.value; //l'utilisateur entre des données
    let emptyArray = [];
    if(userData){
        emptyArray = suggestion.filter((data)=>{
            // filtrer  les valeurs du tableau de ses recherches
            //cela débute quand l'tulisateur tape un mot
              return data.toLocaleLowerCase().startsWith(userData.toLocaleLowerCase());
          });
  
              emptyArray = emptyArray.map((data)=>{
                  return data = '<li>'+ data +'</li>';
              
        });
        console.log(emptyArray);
        searchwrapper.classList.add("active"); // afficher l'autocomplete
        showsuggestion(emptyArray);
        let allList = suggbox.querySelectorAll("li");
        for (let i = 0; i <allList.length; i++) {
            allList[i].setAttribute("onclick", "select(this)");
        }
        
    }else{
        searchwrapper.classList.remove("active"); // cacher l'autocomplete
    }

   
  }

  function select(element){
        let selectUserData = element.textContent;
        inputbox.value = selectUserData;
  }

  function showsuggestion(list){
      let listData;
      if(!list.length){
            userValue = inputbox.value;
            listData ='<li>' + userValue + '</li>';

      }else{
          listData = list.join('');
      }
      suggbox.innerHTML = listData;
  }
  let suggestion =['ATL', 'PEK', 'DXB', 'LAX', 'ORD', 'LHR', 'HND', 'HKG', 'PVG', 'CDG', 'AMS', 'DFW', 'CAN', 'FRA', 'IST', 'DEL', 'CGK', 'SIN', 'ICN', 'DEN', 'BKK', 'JFK', 'KUL', 'SFO', 'MAD', 'CTU', 'LAS', 'BCN', 'BOM', 'YYZ', 'SEA', 'CLT', 'LGW', 'SZX', 'TPE', 'MEX', 'KMG', 'MUC', 'MCO', 'MIA', 'PHX', 'SYD', 'EWR', 'MNL', 'SHA', 'XIY', 'FCO', 'IAH', 'NRT', 'SVO', 'CKG', 'DMK', 'MSP', 'GRU', 'BOS', 'SGN', 'DOH', 'HGH', 'DTW', 'JED', 'MEL', 'FLL', 'ORL', 'SAW', 'BOG', 'DME', 'CJU', 'LGA', 'PHL', 'DUB', 'ZRH', 'CPH', 'KIX', 'PMI', 'MAN', 'OSL', 'LIS', 'ARN', 'BWI', 'AYT', 'STN', 'NKG', 'GMP', 'BLR', 'RUH', 'BRU', 'DUS', 'XMN', 'VIE', 'CGO', 'SLC', 'YVR', 'DCA', 'CSX', 'AUH', 'CUN', 'FUK', 'TAO', 'BNE', 'WUH', 'MAA', 'COK', 'HYD', 'TRV', 'CCU', 'AMD', 'CCJ', 'JAI', 'GOI', 'LKO', 'CJB', 'TRZ', 'PNQ', 'IXB', 'GAU', 'VTZ', 'ATQ', 'IXM', 'NAG', 'IXC', 'IXJ', 'SXR', 'IXE', 'IXZ', 'IDR', 'IXA', 'PAT'];
  </script> {% endcomment %}

  <style>
    * {
      box-sizing: border-box;
    }
    
    
    /*the container must be positioned relative:*/
    .autocomplete {
      position: relative;
      display: inline-block;
    }
        

    .autocomplete-items {
      position: absolute;
      border: 1px solid #d4d4d4;
      border-bottom: none;
      border-top: none;
      z-index: 99;
      /*position the autocomplete items to be the same width as the container:*/
      top: 100%;
      left: 0;
      right: 0;
    }
    
    .autocomplete-items div {
      padding: 10px;
      cursor: pointer;
      background-color: #fff; 
      border-bottom: 1px solid #d4d4d4; 
    }
    
    .autocomplete-items div:hover {
      background-color: orange; 
    }
    
    .autocomplete-active {
      background-color: DodgerBlue !important; 
      color: #ffffff; 
    }
    </style>
   
    
    {% comment %} <h2>Autocomplete</h2>
    
    <p>Start typing:</p>
    
    <!--Make sure the form has the autocomplete function switched off:-->
    <form autocomplete="off" action="/action_page.php">
      <div class="autocomplete" style="width:300px;">
        <input id="myInput" type="text" name="myCountry" placeholder="Country">
      </div>
      <input type="submit">
    </form>
     {% endcomment %}
    <script>
    function autocomplete(inp, arr) {
      /*the autocomplete function takes two arguments,
      the text field element and an array of possible autocompleted values:*/
      var currentFocus;
      /*execute a function when someone writes in the text field:*/
      inp.addEventListener("input", function(e) {
          var a, b, i, val = this.value;
          /*close any already open lists of autocompleted values*/
          closeAllLists();
          if (!val) { return false;}
          currentFocus = -1;
          /*create a DIV element that will contain the items (values):*/
          a = document.createElement("DIV");
          a.setAttribute("id", this.id + "autocomplete-list");
          a.setAttribute("class", "autocomplete-items");
          /*append the DIV element as a child of the autocomplete container:*/
          this.parentNode.appendChild(a);
          /*for each item in the array...*/
          for (i = 0; i < arr.length; i++) {
            /*check if the item starts with the same letters as the text field value:*/
            if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
              /*create a DIV element for each matching element:*/
              b = document.createElement("DIV");
              /*make the matching letters bold:*/
              b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
              b.innerHTML += arr[i].substr(val.length);
              /*insert a input field that will hold the current array item's value:*/
              b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
              /*execute a function when someone clicks on the item value (DIV element):*/
              b.addEventListener("click", function(e) {
                  /*insert the value for the autocomplete text field:*/
                  inp.value = this.getElementsByTagName("input")[0].value;
                  /*close the list of autocompleted values,
                  (or any other open lists of autocompleted values:*/
                  closeAllLists();
              });
              a.appendChild(b);
            }
          }
      });
      /*execute a function presses a key on the keyboard:*/
      inp.addEventListener("keydown", function(e) {
          var x = document.getElementById(this.id + "autocomplete-list");
          if (x) x = x.getElementsByTagName("div");
          if (e.keyCode == 40) {
            /*If the arrow DOWN key is pressed,
            increase the currentFocus variable:*/
            currentFocus++;
            /*and and make the current item more visible:*/
            addActive(x);
          } else if (e.keyCode == 38) { //up
            /*If the arrow UP key is pressed,
            decrease the currentFocus variable:*/
            currentFocus--;
            /*and and make the current item more visible:*/
            addActive(x);
          } else if (e.keyCode == 13) {
            /*If the ENTER key is pressed, prevent the form from being submitted,*/
            e.preventDefault();
            if (currentFocus > -1) {
              /*and simulate a click on the "active" item:*/
              if (x) x[currentFocus].click();
            }
          }
      });
      function addActive(x) {
        /*a function to classify an item as "active":*/
        if (!x) return false;
        /*start by removing the "active" class on all items:*/
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        /*add class "autocomplete-active":*/
        x[currentFocus].classList.add("autocomplete-active");
      }
      function removeActive(x) {
        /*a function to remove the "active" class from all autocomplete items:*/
        for (var i = 0; i < x.length; i++) {
          x[i].classList.remove("autocomplete-active");
        }
      }
      function closeAllLists(elmnt) {
        /*close all autocomplete lists in the document,
        except the one passed as an argument:*/
        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
          if (elmnt != x[i] && elmnt != inp) {
            x[i].parentNode.removeChild(x[i]);
          }
        }
      }
      /*execute a function when someone clicks in the document:*/
      document.addEventListener("click", function (e) {
          closeAllLists(e.target);
      });
    }
    var cities =['ATL', 'PEK', 'DXB', 'LAX', 'ORD', 'LHR', 'HND', 'HKG', 'PVG', 'CDG', 'AMS', 'DFW', 'CAN', 'FRA', 'IST', 'DEL', 'CGK', 'SIN', 'ICN', 'DEN', 'BKK', 'JFK', 'KUL', 'SFO', 'MAD', 'CTU', 'LAS', 'BCN', 'BOM', 'YYZ', 'SEA', 'CLT', 'LGW', 'SZX', 'TPE', 'MEX', 'KMG', 'MUC', 'MCO', 'MIA', 'PHX', 'SYD', 'EWR', 'MNL', 'SHA', 'XIY', 'FCO', 'IAH', 'NRT', 'SVO', 'CKG', 'DMK', 'MSP', 'GRU', 'BOS', 'SGN', 'DOH', 'HGH', 'DTW', 'JED', 'MEL', 'FLL', 'ORL', 'SAW', 'BOG', 'DME', 'CJU', 'LGA', 'PHL', 'DUB', 'ZRH', 'CPH', 'KIX', 'PMI', 'MAN', 'OSL', 'LIS', 'ARN', 'BWI', 'AYT', 'STN', 'NKG', 'GMP', 'BLR', 'RUH', 'BRU', 'DUS', 'XMN', 'VIE', 'CGO', 'SLC', 'YVR', 'DCA', 'CSX', 'AUH', 'CUN', 'FUK', 'TAO', 'BNE', 'WUH', 'MAA', 'COK', 'HYD', 'TRV', 'CCU', 'AMD', 'CCJ', 'JAI', 'GOI', 'LKO', 'CJB', 'TRZ', 'PNQ', 'IXB', 'GAU', 'VTZ', 'ATQ', 'IXM', 'NAG', 'IXC', 'IXJ', 'SXR', 'IXE', 'IXZ', 'IDR', 'IXA', 'PAT'];

    /*An array containing all the country names in the world:*/
    var countries = ["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua & Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central Arfrican Republic","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauro","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Korea","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre & Miquelon","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","St Kitts & Nevis","St Lucia","St Vincent","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Turks & Caicos","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];
    
    /*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
    autocomplete(document.getElementById("origin"), cities);
    autocomplete(document.getElementById("destination"), cities);
</script>


{% endblock maincontent %}